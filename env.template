# üöÇ VIEAgent ChromaDB - Railway Environment Variables Template
# Copy these to Railway Variables section

# üö® CRITICAL FIX APPLIED: $PORT Environment Variable Expansion
# Issue Fixed: "invalid value '$PORT' for '--port <PORT>': invalid digit found in string"
# Solution: Changed from JSON array CMD to shell form CMD for proper variable expansion

# üîß REQUIRED VARIABLES
PORT=8000
CHROMA_HOST=0.0.0.0
CHROMA_PORT=8000
IS_PERSISTENT=1
PERSIST_DIRECTORY=/app/data
ANONYMIZED_TELEMETRY=false
CHROMA_DB_IMPL=duckdb+parquet

# üîí SECURITY VARIABLES (Optional)
CHROMA_SERVER_CORS_ALLOW_ORIGINS=["*"]
CHROMA_SERVER_AUTHN_PROVIDER=""
CHROMA_SERVER_AUTHZ_PROVIDER=""

# üåê RAILWAY NETWORKING (Auto-set by Railway)
RAILWAY_STATIC_URL=""
RAILWAY_PRIVATE_DOMAIN=""
RAILWAY_PUBLIC_DOMAIN=""

# üìù USAGE INSTRUCTIONS:
# 1. Copy these variables to Railway Dashboard > Variables tab
# 2. Set each variable name and value
# 3. Deploy to apply changes

# üõ†Ô∏è START COMMAND OPTIONS (All fixed for proper $PORT expansion):
# Option 1 (Dockerfile): CMD chroma run --host 0.0.0.0 --port ${PORT:-8000} --path /app/data
# Option 2 (Procfile): web: chroma run --host 0.0.0.0 --port ${PORT:-8000} --path /app/data  
# Option 3 (railway.json): "startCommand": "chroma run --host 0.0.0.0 --port ${PORT:-8000} --path /app/data"
# Option 4 (Script): /app/start.sh (with validation and logging)

# üîç TROUBLESHOOTING:
# - All start methods now use ${PORT:-8000} instead of $PORT for proper expansion
# - Startup script validates PORT is numeric before use
# - Falls back to port 8000 if PORT is not set or invalid 